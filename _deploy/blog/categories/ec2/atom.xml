<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: ec2 | Lite]]></title>
  <link href="http://lite.github.com/blog/categories/ec2/atom.xml" rel="self"/>
  <link href="http://lite.github.com/"/>
  <updated>2012-11-04T11:18:30+08:00</updated>
  <id>http://lite.github.com/</id>
  <author>
    <name><![CDATA[Lite]]></name>
    <email><![CDATA[litekok@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[chef_on_ec2]]></title>
    <link href="http://lite.github.com/blog/2011/11/08/chef-on-ec2/"/>
    <updated>2011-11-08T00:17:00+08:00</updated>
    <id>http://lite.github.com/blog/2011/11/08/chef-on-ec2</id>
    <content type="html"><![CDATA[<p><a href="http://console.aws.amazon.com/ec2/home?region=us-west-1&amp;#s=SecurityGroups">aws security groups</a></p>

<pre><code>22 (SSH)  0.0.0.0/0 Delete
80 (HTTP) 0.0.0.0/0 Delete

ssh-keygen -R www.fssle.com
ssh -i fssle-ec2.pem ubuntu@www.fssle.com
</code></pre>

<p><a href="https://aws-portal.amazon.com/gp/aws/developer/account/index.html?action=access-key">aws access key</a></p>

<pre><code>export AWS_ACCESS_KEY_ID=""
export AWS_SECRET_ACCESS_KEY=""
</code></pre>

<p><a href="http://uec-images.ubuntu.com/server/releases/11.04/release/">ubuntu ec2 image</a></p>

<pre><code>knife[:aws_access_key_id]     = "#{ENV['AWS_ACCESS_KEY_ID']}"
knife[:aws_secret_access_key] = "#{ENV['AWS_SECRET_ACCESS_KEY']}"
knife[:identity_file]         = 'fssle-ec2.pem'
knife[:aws_ssh_key_id]        = "fssle-ec2"
knife[:availability_zone]     = 'us-west-1a'
knife[:region]                = 'us-west-1'
knife[:aws_image_id]          = 'ami-43580406'

knife ec2 server list
knife ec2 server delete i-296cd36e
knife ec2 server create -I ami-43580406 -f t1.micro -x ubuntu -G default 
</code></pre>

<p><a href="https://community.opscode.com/users/username/user_key/new">opscode user key</a></p>

<pre><code>username.pem 
knife.rb 
org-validator.pem
</code></pre>

<ul>
<li>chef</li>
</ul>


<blockquote><ul>
<li>role</li>
</ul>
</blockquote>

<pre><code>knife role list
export EDITOR=vim &amp;&amp; knife role create base
knife role edit base
knife role show base
knife role from file roles/base.rb
</code></pre>

<blockquote><ul>
<li>cookbook</li>
</ul>
</blockquote>

<pre><code>knife cookbook site download apt
knife cookbook site download aws
knife cookbook site download apache2

knife cookbook create fssle
knife cookbook list
knife cookbook upload aws apt apache2
</code></pre>

<blockquote><ul>
<li>ec2</li>
</ul>
</blockquote>

<pre><code>knife ec2 server create "role[fssle]" -I ami-43580406 -f t1.micro -G default -region -S knife -i ./fssle-ec2.pem --ssh-user ubuntu 
</code></pre>
]]></content>
  </entry>
  
</feed>
